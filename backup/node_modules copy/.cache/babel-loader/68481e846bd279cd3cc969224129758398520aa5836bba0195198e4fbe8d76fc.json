{"ast":null,"code":"var _jsxFileName = \"/Users/rodrigocandi/solar-simulator/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport './App.css';\nimport { Line } from 'react-chartjs-2';\nimport { Chart as ChartJS, CategoryScale, LinearScale, PointElement, LineElement, Title, Tooltip, Legend } from 'chart.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nChartJS.register(CategoryScale, LinearScale, PointElement, LineElement, Title, Tooltip, Legend);\n\n// Constants\nconst SUNRISE = 6.0; // 6:00 AM\nconst SUNSET = 18.0; // 6:00 PM\nconst PEAK_TIME = 12.5; // 12:30 PM\nconst SIGMA = 2.5; // width of the bell curve\n\nconst BASE_LOAD = 1.0; // kW base house load\nconst FRIDGE_LOAD = 0.1; // kW, always on\nconst APPLIANCE_LOADS = {\n  TV: 0.1,\n  Oven: 2.0,\n  Aircon: 1.5\n};\n\n// Solar production function (in kW) using a bell curve that only produces power between sunrise and sunset.\nfunction solarProduction(t, inverterCapacity) {\n  if (t < SUNRISE || t > SUNSET) return 0;\n  const production = inverterCapacity * Math.exp(-Math.pow(t - PEAK_TIME, 2) / (2 * Math.pow(SIGMA, 2)));\n  return production;\n}\n\n// Simulation function which integrates the day from midnight to the current time.\n// It returns the final simulation results and also arrays for plotting.\nfunction simulateDay(timeOfDay, inverterCapacity, batteryCapacity, appliancesState) {\n  const dt = 0.1; // time step in hours (~6 minutes)\n  let batteryEnergy = batteryCapacity; // Battery energy in kWh (starts full)\n  let cumulativeGridImport = 0; // kWh imported from grid\n  let cumulativeGridExport = 0; // kWh exported to grid\n  let cumulativeHouseConsumption = 0; // kWh consumed by the house\n\n  // Arrays for graphing\n  const times = [];\n  const socArr = [];\n  const gridImportArr = [];\n  const consumptionArr = [];\n\n  // Integrate over time from 0 to timeOfDay\n  for (let t = 0; t <= timeOfDay; t += dt) {\n    // Calculate house load (base load + fridge + any toggled appliances)\n    let load = BASE_LOAD + FRIDGE_LOAD;\n    if (appliancesState.TV) load += APPLIANCE_LOADS.TV;\n    if (appliancesState.Oven) load += APPLIANCE_LOADS.Oven;\n    if (appliancesState.Aircon) load += APPLIANCE_LOADS.Aircon;\n\n    // Integrate house consumption\n    cumulativeHouseConsumption += load * dt; // kWh\n\n    // Solar production at time t\n    const solar = solarProduction(t, inverterCapacity);\n    const netPower = solar - load; // kW (positive means excess solar)\n\n    if (netPower >= 0) {\n      // Excess solar: charge battery (limited by remaining capacity) and export any extra to grid\n      const energyExcess = netPower * dt; // kWh available for charging\n      const availableCapacity = batteryCapacity - batteryEnergy;\n      const energyToBattery = Math.min(energyExcess, availableCapacity);\n      batteryEnergy += energyToBattery;\n      const energyExported = energyExcess - energyToBattery;\n      cumulativeGridExport += energyExported;\n    } else {\n      // Deficit: discharge battery to cover load (limited by a 5 kW rate)\n      const deficitEnergy = -netPower * dt; // kWh needed\n      const maxDischargeEnergy = 5 * dt; // maximum energy that can be discharged in this time step (5 kW cap)\n      const energyFromBattery = Math.min(deficitEnergy, batteryEnergy, maxDischargeEnergy);\n      batteryEnergy -= energyFromBattery;\n      const energyShortfall = deficitEnergy - energyFromBattery;\n      cumulativeGridImport += energyShortfall;\n    }\n\n    // Battery State of Charge (SoC)\n    const batterySoC = batteryEnergy / batteryCapacity * 100;\n\n    // Record values for graphing\n    times.push(t);\n    socArr.push(batterySoC);\n    gridImportArr.push(cumulativeGridImport);\n    consumptionArr.push(cumulativeHouseConsumption);\n  }\n\n  // Final instantaneous values at timeOfDay\n  let finalLoad = BASE_LOAD + FRIDGE_LOAD;\n  if (appliancesState.TV) finalLoad += APPLIANCE_LOADS.TV;\n  if (appliancesState.Oven) finalLoad += APPLIANCE_LOADS.Oven;\n  if (appliancesState.Aircon) finalLoad += APPLIANCE_LOADS.Aircon;\n  const finalSolar = solarProduction(timeOfDay, inverterCapacity);\n  return {\n    batterySoC: batteryEnergy / batteryCapacity * 100,\n    batteryEnergy,\n    cumulativeGridImport,\n    cumulativeGridExport,\n    currentLoad: finalLoad,\n    currentSolar: finalSolar,\n    cumulativeHouseConsumption,\n    times,\n    socArr,\n    gridImportArr,\n    consumptionArr\n  };\n}\nfunction App() {\n  _s();\n  // Component state\n  const [inverterCapacity, setInverterCapacity] = useState(3.0);\n  const [batteryCapacity, setBatteryCapacity] = useState(10);\n  const [timeOfDay, setTimeOfDay] = useState(12); // default: 12:00 (noon)\n  const [appliances, setAppliances] = useState({\n    TV: false,\n    Oven: false,\n    Aircon: false\n  });\n\n  // Handlers for inputs\n  const handleInverterCapacityChange = e => {\n    const value = parseFloat(e.target.value);\n    if (!isNaN(value)) setInverterCapacity(value);\n  };\n  const handleBatteryCapacityChange = capacity => {\n    setBatteryCapacity(capacity);\n  };\n  const handleApplianceToggle = name => {\n    setAppliances(prev => ({\n      ...prev,\n      [name]: !prev[name]\n    }));\n  };\n  const handleTimeChange = e => {\n    setTimeOfDay(parseFloat(e.target.value));\n  };\n\n  // Run the simulation from midnight to the selected time-of-day\n  const simulation = simulateDay(timeOfDay, inverterCapacity, batteryCapacity, appliances);\n\n  // Format time as HH:MM from a decimal hour value\n  const formatTime = t => {\n    const hours = Math.floor(t);\n    const minutes = Math.floor((t - hours) * 60);\n    return `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}`;\n  };\n\n  // Prepare chart data if timeOfDay > 0 (if timeOfDay resets to 0, the graph is cleared)\n  let chartData = null;\n  if (timeOfDay > 0) {\n    chartData = {\n      labels: simulation.times.map(t => formatTime(t)),\n      datasets: [{\n        label: 'Battery SoC (%)',\n        data: simulation.socArr,\n        borderColor: 'blue',\n        backgroundColor: 'blue',\n        yAxisID: 'y1',\n        fill: false\n      }, {\n        label: 'Cumulative Grid Import (kWh)',\n        data: simulation.gridImportArr,\n        borderColor: 'red',\n        backgroundColor: 'red',\n        yAxisID: 'y2',\n        fill: false\n      }]\n    };\n  }\n\n  // Chart options with two y-axes\n  const chartOptions = {\n    responsive: true,\n    plugins: {\n      legend: {\n        position: 'top'\n      },\n      title: {\n        display: true,\n        text: 'SoC and Cumulative Grid Import Over Time'\n      }\n    },\n    scales: {\n      y1: {\n        type: 'linear',\n        position: 'left',\n        title: {\n          display: true,\n          text: 'Battery SoC (%)'\n        },\n        min: 0,\n        max: 100\n      },\n      y2: {\n        type: 'linear',\n        position: 'right',\n        title: {\n          display: true,\n          text: 'Grid Import (kWh)'\n        },\n        grid: {\n          drawOnChartArea: false\n        }\n      }\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      padding: '20px',\n      fontFamily: 'Arial, sans-serif'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Solar + Battery House Simulation\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"label\", {\n        children: [\"Inverter Capacity (kW):\", ' ', /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          value: inverterCapacity,\n          onChange: handleInverterCapacityChange,\n          step: \"0.1\",\n          min: \"0\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Battery Capacity (kWh):\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 9\n      }, this), [5, 10, 15, 20, 25].map(cap => /*#__PURE__*/_jsxDEV(\"label\", {\n        style: {\n          marginRight: '10px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"radio\",\n          name: \"batteryCapacity\",\n          value: cap,\n          checked: batteryCapacity === cap,\n          onChange: () => handleBatteryCapacityChange(cap)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 13\n        }, this), cap, \" kWh\"]\n      }, cap, true, {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 11\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        margin: '20px 0'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"label\", {\n        children: [\"Time of Day: \", formatTime(timeOfDay), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"range\",\n          min: \"0\",\n          max: \"24\",\n          step: \"0.1\",\n          value: timeOfDay,\n          onChange: handleTimeChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Appliance Control\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Fridge is always on (0.1 kW)\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 268,\n      columnNumber: 7\n    }, this), Object.keys(appliances).map(name => /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"label\", {\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"checkbox\",\n          checked: appliances[name],\n          onChange: () => handleApplianceToggle(name)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 13\n        }, this), name, \" (\", APPLIANCE_LOADS[name], \" kW)\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 11\n      }, this)\n    }, name, false, {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 9\n    }, this)), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Simulation Results\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 283,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"Time: \", formatTime(timeOfDay)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 284,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"Solar Production (instantaneous): \", simulation.currentSolar.toFixed(2), \" kW\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 285,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"House Load (instantaneous): \", simulation.currentLoad.toFixed(2), \" kW\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 286,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"Battery SoC: \", simulation.batterySoC.toFixed(1), \"%\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 287,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"Battery Energy: \", simulation.batteryEnergy.toFixed(2), \" kWh\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 288,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"Cumulative Grid Import: \", simulation.cumulativeGridImport.toFixed(2), \" kWh\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 289,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"Cumulative Grid Export: \", simulation.cumulativeGridExport.toFixed(2), \" kWh\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 290,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"Cumulative House Consumption: \", simulation.cumulativeHouseConsumption.toFixed(2), \" kWh\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 291,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"System Diagram\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 294,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"svg\", {\n      width: \"500\",\n      height: \"300\",\n      style: {\n        border: '1px solid #ccc'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"g\", {\n        id: \"house\",\n        children: [/*#__PURE__*/_jsxDEV(\"rect\", {\n          x: \"200\",\n          y: \"150\",\n          width: \"200\",\n          height: \"100\",\n          fill: \"none\",\n          stroke: \"black\",\n          strokeWidth: \"2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 298,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"polygon\", {\n          points: \"200,150 300,100 400,150\",\n          fill: \"none\",\n          stroke: \"black\",\n          strokeWidth: \"2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 299,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 297,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"g\", {\n        id: \"panels\",\n        children: [/*#__PURE__*/_jsxDEV(\"rect\", {\n          x: \"220\",\n          y: \"110\",\n          width: \"40\",\n          height: \"20\",\n          fill: \"none\",\n          stroke: \"black\",\n          strokeWidth: \"2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 303,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"rect\", {\n          x: \"280\",\n          y: \"110\",\n          width: \"40\",\n          height: \"20\",\n          fill: \"none\",\n          stroke: \"black\",\n          strokeWidth: \"2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 304,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n          x1: \"240\",\n          y1: \"130\",\n          x2: \"260\",\n          y2: \"170\",\n          stroke: \"black\",\n          strokeWidth: \"2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 305,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n          x1: \"300\",\n          y1: \"130\",\n          x2: \"280\",\n          y2: \"170\",\n          stroke: \"black\",\n          strokeWidth: \"2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 306,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 302,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"g\", {\n        id: \"battery\",\n        children: [/*#__PURE__*/_jsxDEV(\"rect\", {\n          x: \"150\",\n          y: \"170\",\n          width: \"40\",\n          height: \"60\",\n          fill: \"none\",\n          stroke: \"black\",\n          strokeWidth: \"2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 310,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"text\", {\n          x: \"170\",\n          y: \"165\",\n          fontSize: \"10\",\n          textAnchor: \"middle\",\n          children: \"Battery\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 311,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 309,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"g\", {\n        id: \"inverter\",\n        children: [/*#__PURE__*/_jsxDEV(\"rect\", {\n          x: \"110\",\n          y: \"190\",\n          width: \"12\",\n          height: \"18\",\n          fill: \"none\",\n          stroke: \"black\",\n          strokeWidth: \"2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 315,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"text\", {\n          x: \"116\",\n          y: \"185\",\n          fontSize: \"8\",\n          textAnchor: \"middle\",\n          children: \"Inv\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 316,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 314,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n        x1: \"150\",\n        y1: \"200\",\n        x2: \"122\",\n        y2: \"200\",\n        stroke: \"black\",\n        strokeWidth: \"2\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 319,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n        x1: \"110\",\n        y1: \"200\",\n        x2: \"200\",\n        y2: \"200\",\n        stroke: \"black\",\n        strokeWidth: \"2\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 320,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n        x1: \"260\",\n        y1: \"170\",\n        x2: \"110\",\n        y2: \"200\",\n        stroke: \"black\",\n        strokeWidth: \"2\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 321,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 295,\n      columnNumber: 7\n    }, this), timeOfDay > 0 && chartData && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: '20px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"SoC and Cumulative Grid Import Over Time\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 327,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Line, {\n        data: chartData,\n        options: chartOptions\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 328,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 326,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 216,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"G9A/yFuiZ+OGOuMzEIlzR0XT4KY=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","Line","Chart","ChartJS","CategoryScale","LinearScale","PointElement","LineElement","Title","Tooltip","Legend","jsxDEV","_jsxDEV","register","SUNRISE","SUNSET","PEAK_TIME","SIGMA","BASE_LOAD","FRIDGE_LOAD","APPLIANCE_LOADS","TV","Oven","Aircon","solarProduction","t","inverterCapacity","production","Math","exp","pow","simulateDay","timeOfDay","batteryCapacity","appliancesState","dt","batteryEnergy","cumulativeGridImport","cumulativeGridExport","cumulativeHouseConsumption","times","socArr","gridImportArr","consumptionArr","load","solar","netPower","energyExcess","availableCapacity","energyToBattery","min","energyExported","deficitEnergy","maxDischargeEnergy","energyFromBattery","energyShortfall","batterySoC","push","finalLoad","finalSolar","currentLoad","currentSolar","App","_s","setInverterCapacity","setBatteryCapacity","setTimeOfDay","appliances","setAppliances","handleInverterCapacityChange","e","value","parseFloat","target","isNaN","handleBatteryCapacityChange","capacity","handleApplianceToggle","name","prev","handleTimeChange","simulation","formatTime","hours","floor","minutes","toString","padStart","chartData","labels","map","datasets","label","data","borderColor","backgroundColor","yAxisID","fill","chartOptions","responsive","plugins","legend","position","title","display","text","scales","y1","type","max","y2","grid","drawOnChartArea","style","padding","fontFamily","children","fileName","_jsxFileName","lineNumber","columnNumber","onChange","step","cap","marginRight","checked","margin","Object","keys","toFixed","width","height","border","id","x","y","stroke","strokeWidth","points","x1","x2","fontSize","textAnchor","marginTop","options","_c","$RefreshReg$"],"sources":["/Users/rodrigocandi/solar-simulator/src/App.js"],"sourcesContent":["import React, { useState } from 'react';\nimport './App.css';\nimport { Line } from 'react-chartjs-2';\nimport {\n  Chart as ChartJS,\n  CategoryScale,\n  LinearScale,\n  PointElement,\n  LineElement,\n  Title,\n  Tooltip,\n  Legend,\n} from 'chart.js';\n\nChartJS.register(\n  CategoryScale,\n  LinearScale,\n  PointElement,\n  LineElement,\n  Title,\n  Tooltip,\n  Legend\n);\n\n// Constants\nconst SUNRISE = 6.0; // 6:00 AM\nconst SUNSET = 18.0; // 6:00 PM\nconst PEAK_TIME = 12.5; // 12:30 PM\nconst SIGMA = 2.5; // width of the bell curve\n\nconst BASE_LOAD = 1.0;     // kW base house load\nconst FRIDGE_LOAD = 0.1;   // kW, always on\nconst APPLIANCE_LOADS = {\n  TV: 0.1,\n  Oven: 2.0,\n  Aircon: 1.5,\n};\n\n// Solar production function (in kW) using a bell curve that only produces power between sunrise and sunset.\nfunction solarProduction(t, inverterCapacity) {\n  if (t < SUNRISE || t > SUNSET) return 0;\n  const production = inverterCapacity * Math.exp(-Math.pow(t - PEAK_TIME, 2) / (2 * Math.pow(SIGMA, 2)));\n  return production;\n}\n\n// Simulation function which integrates the day from midnight to the current time.\n// It returns the final simulation results and also arrays for plotting.\nfunction simulateDay(timeOfDay, inverterCapacity, batteryCapacity, appliancesState) {\n  const dt = 0.1; // time step in hours (~6 minutes)\n  let batteryEnergy = batteryCapacity; // Battery energy in kWh (starts full)\n  let cumulativeGridImport = 0; // kWh imported from grid\n  let cumulativeGridExport = 0; // kWh exported to grid\n  let cumulativeHouseConsumption = 0; // kWh consumed by the house\n  \n  // Arrays for graphing\n  const times = [];\n  const socArr = [];\n  const gridImportArr = [];\n  const consumptionArr = [];\n  \n  // Integrate over time from 0 to timeOfDay\n  for (let t = 0; t <= timeOfDay; t += dt) {\n    // Calculate house load (base load + fridge + any toggled appliances)\n    let load = BASE_LOAD + FRIDGE_LOAD;\n    if (appliancesState.TV) load += APPLIANCE_LOADS.TV;\n    if (appliancesState.Oven) load += APPLIANCE_LOADS.Oven;\n    if (appliancesState.Aircon) load += APPLIANCE_LOADS.Aircon;\n    \n    // Integrate house consumption\n    cumulativeHouseConsumption += load * dt; // kWh\n\n    // Solar production at time t\n    const solar = solarProduction(t, inverterCapacity);\n    const netPower = solar - load; // kW (positive means excess solar)\n    \n    if (netPower >= 0) {\n      // Excess solar: charge battery (limited by remaining capacity) and export any extra to grid\n      const energyExcess = netPower * dt; // kWh available for charging\n      const availableCapacity = batteryCapacity - batteryEnergy;\n      const energyToBattery = Math.min(energyExcess, availableCapacity);\n      batteryEnergy += energyToBattery;\n      const energyExported = energyExcess - energyToBattery;\n      cumulativeGridExport += energyExported;\n    } else {\n      // Deficit: discharge battery to cover load (limited by a 5 kW rate)\n      const deficitEnergy = (-netPower) * dt; // kWh needed\n      const maxDischargeEnergy = 5 * dt; // maximum energy that can be discharged in this time step (5 kW cap)\n      const energyFromBattery = Math.min(deficitEnergy, batteryEnergy, maxDischargeEnergy);\n      batteryEnergy -= energyFromBattery;\n      const energyShortfall = deficitEnergy - energyFromBattery;\n      cumulativeGridImport += energyShortfall;\n    }\n    \n    // Battery State of Charge (SoC)\n    const batterySoC = (batteryEnergy / batteryCapacity) * 100;\n    \n    // Record values for graphing\n    times.push(t);\n    socArr.push(batterySoC);\n    gridImportArr.push(cumulativeGridImport);\n    consumptionArr.push(cumulativeHouseConsumption);\n  }\n  \n  // Final instantaneous values at timeOfDay\n  let finalLoad = BASE_LOAD + FRIDGE_LOAD;\n  if (appliancesState.TV) finalLoad += APPLIANCE_LOADS.TV;\n  if (appliancesState.Oven) finalLoad += APPLIANCE_LOADS.Oven;\n  if (appliancesState.Aircon) finalLoad += APPLIANCE_LOADS.Aircon;\n  const finalSolar = solarProduction(timeOfDay, inverterCapacity);\n  \n  return {\n    batterySoC: (batteryEnergy / batteryCapacity) * 100,\n    batteryEnergy,\n    cumulativeGridImport,\n    cumulativeGridExport,\n    currentLoad: finalLoad,\n    currentSolar: finalSolar,\n    cumulativeHouseConsumption,\n    times,\n    socArr,\n    gridImportArr,\n    consumptionArr,\n  };\n}\n\nfunction App() {\n  // Component state\n  const [inverterCapacity, setInverterCapacity] = useState(3.0);\n  const [batteryCapacity, setBatteryCapacity] = useState(10);\n  const [timeOfDay, setTimeOfDay] = useState(12); // default: 12:00 (noon)\n  const [appliances, setAppliances] = useState({\n    TV: false,\n    Oven: false,\n    Aircon: false,\n  });\n  \n  // Handlers for inputs\n  const handleInverterCapacityChange = (e) => {\n    const value = parseFloat(e.target.value);\n    if (!isNaN(value)) setInverterCapacity(value);\n  };\n  \n  const handleBatteryCapacityChange = (capacity) => {\n    setBatteryCapacity(capacity);\n  };\n  \n  const handleApplianceToggle = (name) => {\n    setAppliances(prev => ({ ...prev, [name]: !prev[name] }));\n  };\n  \n  const handleTimeChange = (e) => {\n    setTimeOfDay(parseFloat(e.target.value));\n  };\n  \n  // Run the simulation from midnight to the selected time-of-day\n  const simulation = simulateDay(timeOfDay, inverterCapacity, batteryCapacity, appliances);\n  \n  // Format time as HH:MM from a decimal hour value\n  const formatTime = (t) => {\n    const hours = Math.floor(t);\n    const minutes = Math.floor((t - hours) * 60);\n    return `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}`;\n  };\n  \n  // Prepare chart data if timeOfDay > 0 (if timeOfDay resets to 0, the graph is cleared)\n  let chartData = null;\n  if (timeOfDay > 0) {\n    chartData = {\n      labels: simulation.times.map(t => formatTime(t)),\n      datasets: [\n        {\n          label: 'Battery SoC (%)',\n          data: simulation.socArr,\n          borderColor: 'blue',\n          backgroundColor: 'blue',\n          yAxisID: 'y1',\n          fill: false,\n        },\n        {\n          label: 'Cumulative Grid Import (kWh)',\n          data: simulation.gridImportArr,\n          borderColor: 'red',\n          backgroundColor: 'red',\n          yAxisID: 'y2',\n          fill: false,\n        }\n      ]\n    };\n  }\n  \n  // Chart options with two y-axes\n  const chartOptions = {\n    responsive: true,\n    plugins: {\n      legend: { position: 'top' },\n      title: { display: true, text: 'SoC and Cumulative Grid Import Over Time' },\n    },\n    scales: {\n      y1: {\n        type: 'linear',\n        position: 'left',\n        title: { display: true, text: 'Battery SoC (%)' },\n        min: 0,\n        max: 100,\n      },\n      y2: {\n        type: 'linear',\n        position: 'right',\n        title: { display: true, text: 'Grid Import (kWh)' },\n        grid: { drawOnChartArea: false },\n      },\n    },\n  };\n  \n  return (\n    <div style={{ padding: '20px', fontFamily: 'Arial, sans-serif' }}>\n      <h1>Solar + Battery House Simulation</h1>\n      \n      {/* Inverter Capacity Input */}\n      <div>\n        <label>\n          Inverter Capacity (kW):{' '}\n          <input \n            type=\"number\" \n            value={inverterCapacity} \n            onChange={handleInverterCapacityChange} \n            step=\"0.1\" \n            min=\"0\" \n          />\n        </label>\n      </div>\n      \n      {/* Battery Capacity Selection */}\n      <div>\n        <p>Battery Capacity (kWh):</p>\n        {[5, 10, 15, 20, 25].map(cap => (\n          <label key={cap} style={{ marginRight: '10px' }}>\n            <input \n              type=\"radio\" \n              name=\"batteryCapacity\" \n              value={cap} \n              checked={batteryCapacity === cap} \n              onChange={() => handleBatteryCapacityChange(cap)} \n            />\n            {cap} kWh\n          </label>\n        ))}\n      </div>\n      \n      {/* Time-of-Day Slider */}\n      <div style={{ margin: '20px 0' }}>\n        <label>\n          Time of Day: {formatTime(timeOfDay)}\n          <br />\n          <input \n            type=\"range\" \n            min=\"0\" \n            max=\"24\" \n            step=\"0.1\" \n            value={timeOfDay} \n            onChange={handleTimeChange} \n          />\n        </label>\n      </div>\n      \n      {/* Appliance Controls */}\n      <h2>Appliance Control</h2>\n      <p>Fridge is always on (0.1 kW)</p>\n      {Object.keys(appliances).map(name => (\n        <div key={name}>\n          <label>\n            <input \n              type=\"checkbox\" \n              checked={appliances[name]} \n              onChange={() => handleApplianceToggle(name)} \n            />\n            {name} ({APPLIANCE_LOADS[name]} kW)\n          </label>\n        </div>\n      ))}\n      \n      {/* Simulation Results */}\n      <h2>Simulation Results</h2>\n      <p>Time: {formatTime(timeOfDay)}</p>\n      <p>Solar Production (instantaneous): {simulation.currentSolar.toFixed(2)} kW</p>\n      <p>House Load (instantaneous): {simulation.currentLoad.toFixed(2)} kW</p>\n      <p>Battery SoC: {simulation.batterySoC.toFixed(1)}%</p>\n      <p>Battery Energy: {simulation.batteryEnergy.toFixed(2)} kWh</p>\n      <p>Cumulative Grid Import: {simulation.cumulativeGridImport.toFixed(2)} kWh</p>\n      <p>Cumulative Grid Export: {simulation.cumulativeGridExport.toFixed(2)} kWh</p>\n      <p>Cumulative House Consumption: {simulation.cumulativeHouseConsumption.toFixed(2)} kWh</p>\n      \n      {/* SVG System Diagram */}\n      <h2>System Diagram</h2>\n      <svg width=\"500\" height=\"300\" style={{ border: '1px solid #ccc' }}>\n        {/* 3D House Outline */}\n        <g id=\"house\">\n          <rect x=\"200\" y=\"150\" width=\"200\" height=\"100\" fill=\"none\" stroke=\"black\" strokeWidth=\"2\" />\n          <polygon points=\"200,150 300,100 400,150\" fill=\"none\" stroke=\"black\" strokeWidth=\"2\" />\n        </g>\n        {/* Solar Panels on the Roof */}\n        <g id=\"panels\">\n          <rect x=\"220\" y=\"110\" width=\"40\" height=\"20\" fill=\"none\" stroke=\"black\" strokeWidth=\"2\" />\n          <rect x=\"280\" y=\"110\" width=\"40\" height=\"20\" fill=\"none\" stroke=\"black\" strokeWidth=\"2\" />\n          <line x1=\"240\" y1=\"130\" x2=\"260\" y2=\"170\" stroke=\"black\" strokeWidth=\"2\" />\n          <line x1=\"300\" y1=\"130\" x2=\"280\" y2=\"170\" stroke=\"black\" strokeWidth=\"2\" />\n        </g>\n        {/* Battery attached to the house wall */}\n        <g id=\"battery\">\n          <rect x=\"150\" y=\"170\" width=\"40\" height=\"60\" fill=\"none\" stroke=\"black\" strokeWidth=\"2\" />\n          <text x=\"170\" y=\"165\" fontSize=\"10\" textAnchor=\"middle\">Battery</text>\n        </g>\n        {/* Inverter (30% size of battery) */}\n        <g id=\"inverter\">\n          <rect x=\"110\" y=\"190\" width=\"12\" height=\"18\" fill=\"none\" stroke=\"black\" strokeWidth=\"2\" />\n          <text x=\"116\" y=\"185\" fontSize=\"8\" textAnchor=\"middle\">Inv</text>\n        </g>\n        {/* Connecting Lines */}\n        <line x1=\"150\" y1=\"200\" x2=\"122\" y2=\"200\" stroke=\"black\" strokeWidth=\"2\" />\n        <line x1=\"110\" y1=\"200\" x2=\"200\" y2=\"200\" stroke=\"black\" strokeWidth=\"2\" />\n        <line x1=\"260\" y1=\"170\" x2=\"110\" y2=\"200\" stroke=\"black\" strokeWidth=\"2\" />\n      </svg>\n      \n      {/* Graph Section: Only display if timeOfDay > 0 (graph resets at midnight) */}\n      {timeOfDay > 0 && chartData && (\n        <div style={{ marginTop: '20px' }}>\n          <h2>SoC and Cumulative Grid Import Over Time</h2>\n          <Line data={chartData} options={chartOptions} />\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}